@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/AdminLTE/plugins/jQuery/jquery-2.2.3.min.js"></script>
<link href="~/Content/CustomCSS/InputText.css" rel="stylesheet" />



<div class="box-header with-border">
    @*Form Title*@
    <div class="col-lg-8"> <div id="MessageText"></div></div>
    <div class="col-lg-4">
        <div style="text-align:right;">
            <button id="btnSave" class="btn btn-primary btn-lg" type="button"><i class="glyphicon glyphicon-save"></i>Save</button>
            <button id="btnView" class="btn btn-primary btn-lg" type="button"><i class="glyphicon glyphicon-search"></i>Search</button>
            <button id="btnReset" class="btn btn-primary btn-lg" type="button"><i class="glyphicon glyphicon-refresh"></i>Reset</button>
            @*<button id="btnDelete" class="btn btn-primary btn-lg" type="button"><i class="glyphicon glyphicon-trash"></i>Delete</button>*@
        </div>
    </div>
</div>


<div class="box-body">
    @*Form Body Content*@

    <div class="form-group">
        <div class="row">
            <div class="col-xs-0 col-sm-0 col-md-4 col-lg-4"><input type="hidden" id="ID" name="ID" placeholder="ID" class="txtBox form-control" /></div>
            <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="hidden" id="SlNo" name="SlNo" placeholder="SlNo" class="form-control" /></div>
        </div>
    </div>



    <div class="form-group">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Employee Name</div>
            <div class="col-xs-0 col-sm-0 col-md-4 col-lg-4"><input type="text" maxlength="50" id="EmployeeName" name="EmployeeName" placeholder="" class="RequiredField form-control" /></div>

            <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1"></div>
            <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1">Employee Code</div>
            <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="EmployeeCode" name="EmployeeCode" placeholder="" class="RequiredField form-control" /></div>
        </div>
    </div>

    <div class="form-group">
        <div class="row">
            <div class="col-xs-0 col-sm-0 col-md-0 col-lg-0"><input type="hidden" maxlength="50" id="DesignationCode" name="DesignationCode" placeholder="" class="RequiredField form-control" /></div>
            <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Designation</div>
            <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="DesignationName" name="DesignationName" placeholder="" readonly="readonly" class="RequiredField form-control" /></div>
            <div class="col-xs-0 col-sm-0 col-md-1 col-lg-1"><button id="btnFindDesignation" class="btn btn-primary btn-sm" type="button"><i class="glyphicon glyphicon-search"></i>Search</button></div>

            <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1"></div>
            <div class="col-xs-0 col-sm-0 col-md-0 col-lg-0"><input type="hidden" maxlength="50" id="DepartmentCode" name="DepartmentCode" placeholder="" class="RequiredField form-control" /></div>
            <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1">Department</div>
            <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="DepartmentName" name="DepartmentName" placeholder="" readonly="readonly" class="RequiredField form-control" /></div>
            <div class="col-xs-0 col-sm-0 col-md-1 col-lg-1"><button id="btnFindDept" class="btn btn-primary btn-sm" type="button"><i class="glyphicon glyphicon-search"></i>Search</button></div>

        </div>
    </div>

    <div class="form-group">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Contact No</div>
            <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="ContactNo" name="ContactNo" placeholder="" class="RequiredField form-control" /></div>

            <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1"></div>
            <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1"></div>
            <div class="col-xs-12 col-sm-6 col-md-1 col-lg-">Job Description</div>
            <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="JobDescription" name="JobDescription" placeholder="" class="RequiredField form-control" /></div>


        </div>
    </div>


    @*<div class="form-group">
            <div class="row">
                <div class="col-xs-0 col-sm-0 col-md-0 col-lg-0"><input type="hidden" maxlength="50" id="CompanyCode" name="CompanyCode" placeholder="" class="RequiredField form-control" /></div>
                <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Company</div>
                <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="CompanyName" name="CompanyName" placeholder="" readonly="readonly" class="RequiredField form-control" /></div>
                <div class="col-xs-0 col-sm-0 col-md-1 col-lg-1"><button id="btnFindCom" class="btn btn-primary btn-sm" type="button"><i class="glyphicon glyphicon-search"></i>Search</button></div>

                <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1"></div>
                <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1">Last Qualification</div>
                <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="LastQualification" name="LastQualification" placeholder="" class="RequiredField form-control" /></div>
            </div>
        </div>*@

    @*<div class="form-group">
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Date Of Joining</div>
                <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3">

                    <div class="input-group date">
                        <input type="text" class="form-control txtBox" id="DateOfJoining" name="DateOfJoining" placeholder="dd/mm/yyyy">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
                    </div>
                </div>

                <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1"></div>
                <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1"></div>
                <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1">Year(s) of Experience</div>
                <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="TotalExperienceYr" name="TotalExperienceYr" placeholder="" class="RequiredField form-control" /></div>

            </div>
        </div>

        <div class="form-group">
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Contact No</div>
                <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="ContactNo" name="ContactNo" placeholder="" class="RequiredField form-control" /></div>

                <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1"></div>
                <div class="col-xs-12 col-sm-6 col-md-1 col-lg-1"></div>
                <div class="col-xs-12 col-sm-6 col-md-1 col-lg-">Email Id</div>
                <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"><input type="text" maxlength="50" id="EmailId" name="EmailId" placeholder="" class="RequiredField form-control" /></div>


            </div>
        </div>*@

    <div class="form-group">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-2 col-lg-2">Status</div>
            <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3">
                <select class="form-control dropDownList" id="Status" name="Status">
                    <option value="Active" selected>Active</option>
                    <option value="Inactive">Inactive</option>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <fieldset class="panel-border">
                <legend class="panel-border">Upload Documents :</legend>
                <div class="row">
                    <div class="col-sm-3">
                        Certificate & Training Document<span style="color: red">*</span>:
                    </div>
                    <div class="col-sm-4">
                        <input type="text" maxlength="60" id="RefNo" name="RefNo" class="RequiredField form-control" />
                    </div>
                    <div class="col-sm-4">
                        <input type="file" class="txtBox" id="UploadFile" name="UploadFile" />
                        <i class="glyphicon glyphicon-upload form-control-feedback"></i>
                    </div>
                    <div class="col-sm-3">
                    </div>
                </div>
                <div class="row">
                    <br />
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <label>List of Document File</label>
                        <div id="FileGrid" class=""></div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
    <div class="box-footer">@*Form Footer*@</div>
    <div class="row">
        <div id="DisplayPopupWindow" class="PopupWindowLayout" style="display: none;">
            <div id="DisplayPopupWindowGrid" class="PopUpGrid"></div>
        </div>
    </div>
    <div class="row">
        <div id="FindDesigPopupWindow" class="PopupWindowLayout" style="display: none;">
            <div id="FindDesigPopupWindowGrid" class="PopUpGrid"></div>
        </div>
    </div>
    <div class="row">
        <div id="FindDeptPopupWindow" class="PopupWindowLayout" style="display: none;">
            <div id="FindDeptPopupWindowGrid" class="PopUpGrid"></div>
        </div>
    </div>
    <div class="row">
        <div id="FindComPopupWindow" class="PopupWindowLayout" style="display: none;">
            <div id="FindComPopupWindowGrid" class="PopUpGrid"></div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {

            var currentEmployee = sessionStorage.getItem('currentEmployee');
            if (currentEmployee) {
                debugger
                var emp = JSON.parse(currentEmployee);
                $('#EmployeeCode').val(emp.EmployeeCode);
                $('#EmployeeName').val(emp.EmployeeName);
                $('#DesignationName').val(emp.DesignationName);
                $('#DepartmentName').val(emp.DepartmentName);
                $('#ContactNo').val(emp.ContactNo);
                $('#JobDescription').val(emp.JobDescription);
                // অন্যান্য field fill করো
                sessionStorage.removeItem('currentEmployee');
            }

            $('#btnReset').click(function () {
                ResetData();
                $('#Status').val('Active');
                $("#FileGrid").data("kendoGrid").dataSource.data([]);
            });

            //Start of Display section
            var DisplayPopupWindow = $("#DisplayPopupWindow").kendoWindow({
                actions: ["Minimize", "Maximize", "Close"],
                width: "95%",
                height: "80%",
                draggable: true,
                modal: true,
                title: "List of Record"
            }).data("kendoWindow").center();

            $('#btnView').click(function () {
                DisplayPopupWindow.open();
                $.ajax({
                    url: '/EmployeeInfo/GetEmployee',
                    method: 'get',
                    data: 'json',
                    success: function (data) {
                        if (data != "") {
                            $('#DisplayPopupWindowGrid').data('kendoGrid').dataSource.data(data);
                        }
                        else {
                            PopupWindow.close();
                            AcknowledgeMsg();
                        }

                    },
                    error: function () {
                        alert('Error occured!');
                    },
                    //complete: function () { },
                });

            });

            //Initializing Main page details Kendo Grid Colums
            var PopupGrid = $('#DisplayPopupWindowGrid').kendoGrid({
                dataSource: new kendo.data.DataSource({
                    batch: true,
                    schema: {
                        model: {
                            id: "ID",
                            fields: {
                                ID: { type: "string" },
                            }
                        }
                    },
                    pageSize: 10,
                }),
                pageable: {
                    //refresh: true,
                    pageSizes: true, buttonCount: 5
                },
                scrollable: true,
                sortable: true,
                filterable: true,
                editable: false,
                selectable: "row",
                //selectable: "multiple",
                toolbar: ["excel", { template: "<input type='text' id='txtPopupInput'  style='float:right' placeholder='Search...' class='k-textbox'>" }, ],
                excel: {
                    fileName: "Export.xlsx",
                    allPages: true,
                    filterable: true
                },
                navigatable: true,
                height: 430,
                // groupable: true,
                groupable: { messages: { empty: "To view employee information, double on the employee record" } },
                columnMenu: true,
                reorderable: true,
                resizable: true,
                columns: [
                     { field: "ID", hidden: true, width: 50 },
                     //{ field: "SlNo", title: "Slno", width: 50 },
                     { field: "EmployeeCode", title: "EmployeeCode", width: 70 },
                     { field: "EmployeeName", title: "EmployeeName", width: 80 },
                     { field: "DesignationName", title: "Designation", width: 80 },
                     { field: "DepartmentName", title: "Department", width: 80 },
                     { field: "CompanyName", title: "Company", width: 150 },
                     { field: "Status", title: "Status", width: 50 }

                ]

            }).data('kendoGrid');

            $('#DisplayPopupWindowGrid').dblclick(function () {
                var grid = $(this).data('kendoGrid');
                var selectRow = grid.dataItem(grid.select());
                DisplayPopupWindow.close();
                SetMasterData(selectRow);
                $.ajax({
                    url: '@Url.Action("GetFileByRefId", "EmployeeInfo")',
                    type: 'GET',
                    data: { refLevel1: selectRow.ID },
                    success: function (data) {
                        $("#FileGrid").data("kendoGrid").dataSource.data(data);
                    }
                });
            });


            $("#txtPopupInput").keyup(function () {
                var val = $(this).val();
                $("#DisplayPopupWindowGrid").data("kendoGrid").dataSource.filter({
                    logic: "or",
                    filters: [
                         { field: "EmployeeCode", operator: "contains", value: val },
                         { field: "EmployeeName", operator: "contains", value: val },
                         { field: "DesignationName", operator: "contains", value: val },
                         { field: "DepartmentName", operator: "contains", value: val },
                         { field: "CompanyName", operator: "contains", value: val },
                         { field: "Status", operator: "contains", value: val },
                    ]
                });
            });

            // End of Display section

            //// start designation find section //////////////////////////////////////////////////////////

            var PopupWindowDesig = $("#FindDesigPopupWindow").kendoWindow({
                actions: ["Minimize", "Maximize", "Close"],
                width: "90%",
                height: "80%",
                draggable: true,
                modal: true,
                title: "Designation List....."
            }).data("kendoWindow").center();


            $('#btnFindDesignation').click(function () {
                PopupWindowDesig.open();
                $.ajax({
                    url: '/DesignationInfo/GetDesignation',
                    method: 'get',
                    data: 'json',
                    success: function (data) {
                        if (data != "") {
                            $('#FindDesigPopupWindowGrid').data('kendoGrid').dataSource.data(data);
                        }
                        else {
                            PopupWindowDesig.close();
                            AcknowledgeMsg();
                        }
                    },
                    error: function () {
                        alert('Error occured!');
                    },
                    //complete: function () { },
                });

            });

            //Initializing Main page details Kendo Grid Colums
            var PopupGrid = $('#FindDesigPopupWindowGrid').kendoGrid({
                dataSource: new kendo.data.DataSource({
                    batch: true,
                    schema: {
                        model: {
                            id: "DesignationCode",
                            fields: {
                                DesignationCode: { type: "string" },
                            }
                        }
                    },
                    pageSize: 10,
                }),
                pageable: {
                    //refresh: true,
                    pageSizes: true, buttonCount: 5
                },
                scrollable: true,
                sortable: true,
                filterable: true,
                editable: false,
                selectable: "row",
                //selectable: "multiple",
                toolbar: [{ template: "<input type='text' id='txtFindDesigPopupInput'  style='float:right' placeholder='Search...' class='k-textbox'>" }, ],
                navigatable: true,
                height: 430,
                // groupable: true,
                groupable: { messages: { empty: "Double Click on the designation" } },
                columnMenu: true,
                reorderable: true,
                resizable: true,
                columns: [
                     { field: "DesignationName", title: "Designation Name", width: 80 },
                     { field: "DesignationCode", title: "Designation Code", width: 40 },
                ]

            }).data('kendoGrid');

            $('#FindDesigPopupWindowGrid').dblclick(function () {
                var grid = $(this).data('kendoGrid');
                var selectRow = grid.dataItem(grid.select());
                PopupWindowDesig.close();
                SetMasterData(selectRow);
            });


            $("#txtFindDesigPopupInput").keyup(function () {
                var val = $(this).val();
                $("#FindDesigPopupWindowGrid").data("kendoGrid").dataSource.filter({
                    logic: "or",
                    filters: [
                         { field: "DesignationCode", operator: "contains", value: val },
                         { field: "DesignationName", operator: "contains", value: val },
                    ]
                });
            });

            ////////////// end of designation find section /////////////////////////////////////////////////////////////



            ////////////////// start department find section //////////////////////////////////////////////////////////

            var DeptPopupWindow = $("#FindDeptPopupWindow").kendoWindow({
                actions: ["Minimize", "Maximize", "Close"],
                width: "90%",
                height: "80%",
                draggable: true,
                modal: true,
                title: "Department List....."
            }).data("kendoWindow").center();


            $('#btnFindDept').click(function () {
                DeptPopupWindow.open();
                $.ajax({
                    url: '/DepartmentInfo/GetDepartment',
                    method: 'get',
                    data: 'json',
                    success: function (data) {
                        if (data != "") {
                            $('#FindDeptPopupWindowGrid').data('kendoGrid').dataSource.data(data);
                        }
                        else {
                            DeptPopupWindow.close();
                            AcknowledgeMsg();
                        }
                    },
                    error: function () {
                        alert('Error occured!');
                    },
                });

            });

            //Initializing Main page details Kendo Grid Colums
            var PopupGrid = $('#FindDeptPopupWindowGrid').kendoGrid({
                dataSource: new kendo.data.DataSource({
                    batch: true,
                    schema: {
                        model: {
                            id: "DepartmentCode",
                            fields: {
                                DepartmentCode: { type: "string" },
                            }
                        }
                    },
                    pageSize: 10,
                }),
                pageable: {
                    //refresh: true,
                    pageSizes: true, buttonCount: 5
                },
                scrollable: true,
                sortable: true,
                filterable: true,
                editable: false,
                selectable: "row",
                //selectable: "multiple",
                toolbar: [{ template: "<input type='text' id='txtFindDeptPopupInput'  style='float:right' placeholder='Search...' class='k-textbox'>" }, ],
                navigatable: true,
                height: 430,
                // groupable: true,
                groupable: { messages: { empty: "Double Click on the department" } },
                columnMenu: true,
                reorderable: true,
                resizable: true,
                columns: [
                     { field: "DepartmentName", title: "Department Name", width: 80 },
                     { field: "DepartmentCode", title: "Department Code", width: 40 },
                ]

            }).data('kendoGrid');

            $('#FindDeptPopupWindowGrid').dblclick(function () {
                var grid = $(this).data('kendoGrid');
                var selectRow = grid.dataItem(grid.select());
                DeptPopupWindow.close();
                SetMasterData(selectRow);
            });


            $("#txtFindDeptPopupInput").keyup(function () {
                var val = $(this).val();
                $("#FindDeptPopupWindowGrid").data("kendoGrid").dataSource.filter({
                    logic: "or",
                    filters: [
                         { field: "DepartmentCode", operator: "contains", value: val },
                         { field: "DepartmentName", operator: "contains", value: val },
                    ]
                });
            });

            ////////////// end of department find section /////////////////////////////////////////////////////////////



            ////////////////// start company find section //////////////////////////////////////////////////////////

            var ComPopupWindow = $("#FindComPopupWindow").kendoWindow({
                actions: ["Minimize", "Maximize", "Close"],
                width: "90%",
                height: "80%",
                draggable: true,
                modal: true,
                title: "Company List....."
            }).data("kendoWindow").center();


            $('#btnFindCom').click(function () {
                ComPopupWindow.open();
                $.ajax({
                    url: '/CompanyInfo/GetCompany',
                    method: 'get',
                    data: 'json',
                    success: function (data) {
                        if (data != "") {
                            $('#FindComPopupWindowGrid').data('kendoGrid').dataSource.data(data);
                        }
                        else {
                            ComPopupWindow.close();
                            AcknowledgeMsg();
                        }
                    },
                    error: function () {
                        alert('Error occured!');
                    },
                });

            });

            //Initializing Main page details Kendo Grid Colums
            var PopupGrid = $('#FindComPopupWindowGrid').kendoGrid({
                dataSource: new kendo.data.DataSource({
                    batch: true,
                    schema: {
                        model: {
                            id: "CompanyCode",
                            fields: {
                                CompanyCode: { type: "string" },
                            }
                        }
                    },
                    pageSize: 10,
                }),
                pageable: {
                    //refresh: true,
                    pageSizes: true, buttonCount: 5
                },
                scrollable: true,
                sortable: true,
                filterable: true,
                editable: false,
                selectable: "row",
                //selectable: "multiple",
                toolbar: [{ template: "<input type='text' id='txtFindComPopupInput'  style='float:right' placeholder='Search...' class='k-textbox'>" }, ],
                navigatable: true,
                height: 430,
                // groupable: true,
                groupable: { messages: { empty: "Double Click on the company" } },
                columnMenu: true,
                reorderable: true,
                resizable: true,
                columns: [
                     { field: "CompanyName", title: "Company Name", width: 80 },
                     { field: "CompanyCode", title: "Company Code", width: 40 },
                ]

            }).data('kendoGrid');

            $('#FindComPopupWindowGrid').dblclick(function () {
                var grid = $(this).data('kendoGrid');
                var selectRow = grid.dataItem(grid.select());

                $('#CompanyCode').val(selectRow.CompanyCode);
                $('#CompanyName').val(selectRow.CompanyName);

                ComPopupWindow.close();

            });




            $("#txtFindComPopupInput").keyup(function () {
                var val = $(this).val();
                $("#FindComPopupWindowGrid").data("kendoGrid").dataSource.filter({
                    logic: "or",
                    filters: [
                         { field: "CompanyCode", operator: "contains", value: val },
                         { field: "CompanyName", operator: "contains", value: val },
                    ]
                });
            });

            ////////////// end of company find section /////////////////////////////////////////////////////////////

            $('.input-group.date').datepicker({
                format: "d/mm/yyyy",//dd M yyyy
                autoclose: true,
                todayHighlight: true

            });





            var fileDataSource = new kendo.data.DataSource({
                batch: true,
                schema: {
                    model: {
                        id: "FileID",
                        fields: {
                            FileID: { editable: false },
                            FileCode: { editable: false },
                            Extention: { editable: false },
                            FileName: { editable: false },
                            RefNo: { editable: false },
                            FileSize: { editable: false },
                            SetOn: { editable: false },
                            SetByName: { editable: false }
                        }
                    }
                },
                pageSize: 10
            });

            //Initializing Main page details Kendo Grid Colums
            var grid = $('#FileGrid').kendoGrid({
                dataSource: fileDataSource,
                pageable: {
                    pageSizes: true, buttonCount: 5
                },
                scrollable: true,
                sortable: true,
                filterable: true,
                editable: true,
                selectable: "row",
                toolbar: [{ template: "<input type='text' id='txtInput'  style='float:right' placeholder='Search...' class='k-textbox'>" }, ],
                navigatable: true,
                groupable: true,
                columnMenu: true,
                reorderable: true,
                resizable: true,
                columns: [
                { field: "FileID", hidden: true },
                { field: "FileCode", hidden: true },
                { field: "Extention", hidden: true },
                { field: "RefNo", title: "Document Name", width: 150, headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 13px;" } },
                { field: "FileName", title: "File Name", width: 350, headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 13px;" } },
                { field: "FileSize", filterable: false, title: "Size(MB)", width: 100, headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 13px;" } },
                { command: [{ name: "Download", text: "Download", imageClass: "glyphicon glyphicon-download", click: handleDownload }], title: "Download Action", width: "120px", attributes: { "class": "btnDownload" }, headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 13px;" } },
                { command: [{ name: "Delete", text: "Delete", imageClass: "glyphicon glyphicon-trash", click: handleFileDelete }], title: "Delete Action", width: "120px", attributes: { "class": "btnDelete" }, headerAttributes: { "class": "gridHeader", style: "font-weight: bold;font-size: 13px;" } }
                ]

            }).data('kendoGrid');

            $("#txtInput").keyup(function () {
                var val = $(this).val();
                $("#FileGrid").data("kendoGrid").dataSource.filter({
                    logic: "or",
                    filters: [
                         { field: "RefNo", operator: "contains", value: val },
                         { field: "FileName", operator: "contains", value: val },
                         { field: "FileSize", operator: "contains", value: val }
                    ]
                });
            });

            function handleFileDelete(event) {
                dataItemInfo = grid.dataItem($(event.currentTarget).closest("tr"));

                if (confirm('Do you really want to delete this file?')) {
                    //event.preventDefault();
                    //event.stopPropagation();
                    $.ajax({
                        url: '@Url.Action("DeleteFile", "General")',
                        type: 'POST',
                        data: JSON.stringify({ "fileId": dataItemInfo.FileID, "fileCode": dataItemInfo.FileCode, "extention": dataItemInfo.Extention }),
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        cache: false,
                        success: function (response) {
                            if (response.Status == "Yes") {
                                toastr.success(OperationMsg("FD"));
                                $("#FileGrid").data("kendoGrid").dataSource.remove(dataItemInfo);
                            }
                            else {
                                toastr.error(OperationMsg("FND"));
                            }
                        }
                    });
                }
            };
            // Download Button in Grid
            function handleDownload(event) {
                dataItemInfo = grid.dataItem($(event.currentTarget).closest("tr"));
                window.location.href = '@Url.Action("Download", "General")' + '?path=' + dataItemInfo.FileCode + dataItemInfo.Extention + '&fileName=' + dataItemInfo.FileName + '&fileId=' + dataItemInfo.FileID;
            };



            $('#UploadFile').on('change', function (e) {
                var checkInput = InputValidation('RefNo');

                if (checkInput == 0) {
                    var files = e.target.files;
                    var refId = $("#ID").val();
                    if (refId != "") {
                        var fileSize = 0;
                        var fSizeStrg = "";
                        $file = $("#UploadFile");
                        for (var f = 0; f < files.length; f++) {
                            var iSize = ($file[0].files[f].size / 1024);
                            fileSize = (Math.round((iSize / 1024) * 100) / 100);
                            if (fSizeStrg != "") {
                                fSizeStrg += ',' + fileSize;
                            }
                            else {
                                fSizeStrg = fileSize;
                            }
                            if (iSize / 1024 > 25) {
                                iSize = (Math.round((iSize / 1024) * 100) / 100);
                                alert('File size is ' + iSize + ' MB');
                                $("#divLoading").show();
                                if (iSize > 25) {
                                    toastr.warning(OperationMsg("UFW"));
                                    $("#divLoading").hide();
                                    return;
                                }
                            }
                        }
                        if (files.length > 0) {
                            if (window.FormData !== undefined) {
                                var data = new FormData();
                                for (var x = 0; x < files.length; x++) {
                                    data.append("file" + x, files[x]);
                                }
                                $("#divLoading").show();
                                $.ajax({
                                    type: "POST",
                                    url: '@Url.Action("UploadFile", "EmployeeInfo")' + '?refLevel1=' + refId + '&refLevel2=' + "" + '&fileSize=' + fSizeStrg + '&refNo=' + $("#RefNo").val(),
                                    contentType: false,
                                    processData: false,
                                    data: data,
                                    success: function (result) {
                                        $("#divLoading").hide();
                                        if (result.msgType == "FUS") {
                                            toastr.success(OperationMsg(result.msgType));
                                            $("#FileGrid").data("kendoGrid").dataSource.data(result.FileList);
                                            //$("#RefNo").val('--Select Any--');
                                        }
                                        else if (result.msgType == "FLI") {
                                            toastr.warning(OperationMsg(result.msgType));
                                        }
                                        else {
                                            toastr.warning(OperationMsg(result.msgType));
                                        }
                                    }

                                });
                            } else {
                                alert("This browser doesn't support HTML5 file uploads!");
                            }
                        }
                    }
                    else {
                        toastr.warning(OperationMsg("FI"));
                    }
                }
                else {
                    toastr.error(OperationMsg("SDN"));
                }

            });

            $('#btnSave').click(function () {
                debugger

                var Input = InputValidation('EmployeeName');

                if (Input == 0) {

                    master.ID = $('#ID').val();
                    master.SlNo = $('#SlNo').val();
                    master.EmployeeCode = $('#EmployeeCode').val();
                    master.EmployeeName = $('#EmployeeName').val();
                    master.DesignationCode = $('#DesignationCode').val();
                    master.DepartmentCode = $('#DepartmentCode').val();
                    master.JobDescription = $('#JobDescription').val();
                    master.CompanyCode = $('#CompanyCode').val();
                    master.LastQualification = $('#LastQualification').val();
                    master.DateOfJoining = $('#DateOfJoining').val();
                    master.TotalExperienceYr = $('#TotalExperienceYr').val();
                    master.ContactNo = $('#ContactNo').val();
                    master.EmailId = $('#EmailId').val();
                    master.Status = $('#Status').val();
                    $.ajax({
                        url: '/EmployeeInfo/frmEmployeeInfo',
                        data: JSON.stringify(master),
                        type: 'POST',
                        contentType: 'application/json;',
                        dataType: 'json',
                        success: function (data) {
                            debugger
                            if (data.Status == "Yes") {
                                $("#ID").val(data.ID);
                                OperationMsg(data.Mode);
                            }
                            else {
                                ErrorFrmServerMsg(data.Status);
                            }

                        },
                        error: function () {
                            ErrorFrmClientMsg();
                            toastr.warning("Duplicate Employee Code Found!");
                        },

                    });
                }
                else {
                    ValidationMsg();
                }

            });
            var master = { "ID": "", "SlNo": "", "EmployeeCode": "", "EmployeeName": "", "DesignationCode": "", "DepartmentCode": "", "JobDescription": "", "CompanyCode": "", "LastQualification": "", "DateOfJoining": "", "TotalExperienceYr": "", "ContactNo": "", "EmailId": "", "Status": "" };
        });



    </script>


